{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _taggedTemplateLiteral from \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/paulcroitoriu/Desktop/React-projects/community-feed/src/containers/Feed.js\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 1%;\\n  background: lightblue;\\n  color: white;\\n  text-decoration: none;\\n  border-radius: 5%;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  text-decoration: none;\\n  color: inherit;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  margin: 5%;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Helmet from \"react-helmet\";\nimport Card from \"../components/Card/Card\";\nvar FeedWrapper = styled.div(_templateObject());\n_c = FeedWrapper;\nvar Alert = styled.div(_templateObject2());\n_c2 = Alert;\nvar CardLink = styled(Link)(_templateObject3());\n_c3 = CardLink;\nvar PaginationBar = styled.div(_templateObject4());\n_c4 = PaginationBar;\nvar PaginationLink = styled(Link)(_templateObject5());\n_c5 = PaginationLink;\nvar ROOT_API = \"https://api.stackexchange.com/2.2/\";\n\nvar Feed = /*#__PURE__*/function (_Component) {\n  _inherits(Feed, _Component);\n\n  var _super = _createSuper(Feed);\n\n  function Feed(props) {\n    var _this;\n\n    _classCallCheck(this, Feed);\n\n    _this = _super.call(this, props);\n    var query = queryString.parse(props.location.search);\n    _this.state = {\n      data: [],\n      page: query.page ? parseInt(query.page) : 1,\n      loading: true,\n      error: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Feed, [{\n    key: \"fetchAPI\",\n    value: function () {\n      var _fetchAPI = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n        var data, dataJSON;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return fetch(\"\".concat(ROOT_API, \"questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow\").concat(page ? \"&page=\".concat(page) : \"\"));\n\n              case 3:\n                data = _context.sent;\n                _context.next = 6;\n                return data.json();\n\n              case 6:\n                dataJSON = _context.sent;\n\n                if (dataJSON) {\n                  this.setState({\n                    data: dataJSON,\n                    loading: false\n                  });\n                }\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                this.setState({\n                  loading: false,\n                  error: _context.t0.message\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function fetchAPI(_x) {\n        return _fetchAPI.apply(this, arguments);\n      }\n\n      return fetchAPI;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var page = this.state.page;\n      this.fetchAPI(page);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      if (prevProps.location.search !== this.props.location.search) {\n        var query = queryString.parse(this.props.location.search);\n        this.setState({\n          page: parseInt(query.page)\n        }, function () {\n          return _this2.fetchAPI(_this2.state.page);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          loading = _this$state.loading,\n          error = _this$state.error,\n          page = _this$state.page;\n      var match = this.props.match;\n\n      if (loading || error) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Helmet, {\n            children: /*#__PURE__*/_jsxDEV(Alert, {\n              children: loading ? \"Loading...\" : error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this)\n        }, void 0, false);\n      }\n\n      return /*#__PURE__*/_jsxDEV(FeedWrapper, {\n        children: [data.items.map(function (item) {\n          return /*#__PURE__*/_jsxDEV(CardLink, {\n            to: \"/questions/\".concat(item.question_id),\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              data: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 13\n            }, _this3)\n          }, item.question_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }, _this3);\n        }), /*#__PURE__*/_jsxDEV(PaginationBar, {\n          children: [page > 1 && /*#__PURE__*/_jsxDEV(PaginationLink, {\n            to: \"\".concat(match.url, \"?page=\").concat(page - 1),\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), data.has_more && /*#__PURE__*/_jsxDEV(PaginationLink, {\n            to: \"\".concat(match.url, \"?page=\").concat(page + 1),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Feed;\n}(Component);\n\nexport default Feed;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"FeedWrapper\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"CardLink\");\n$RefreshReg$(_c4, \"PaginationBar\");\n$RefreshReg$(_c5, \"PaginationLink\");","map":{"version":3,"sources":["/Users/paulcroitoriu/Desktop/React-projects/community-feed/src/containers/Feed.js"],"names":["React","Component","styled","Link","queryString","Helmet","Card","FeedWrapper","div","Alert","CardLink","PaginationBar","PaginationLink","ROOT_API","Feed","props","query","parse","location","search","state","data","page","parseInt","loading","error","fetch","json","dataJSON","setState","message","fetchAPI","prevProps","match","items","map","item","question_id","url","has_more"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Helmet from \"react-helmet\";\nimport Card from \"../components/Card/Card\";\n\nconst FeedWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 5%;\n`;\n\nconst Alert = styled.div`\n  text-align: center;\n`;\n\nconst CardLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n`;\n\nconst PaginationBar = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst PaginationLink = styled(Link)`\n  padding: 1%;\n  background: lightblue;\n  color: white;\n  text-decoration: none;\n  border-radius: 5%;\n`;\n\nconst ROOT_API = \"https://api.stackexchange.com/2.2/\";\n\nclass Feed extends Component {\n  constructor(props) {\n    super(props);\n    const query = queryString.parse(props.location.search);\n    this.state = {\n      data: [],\n      page: query.page ? parseInt(query.page) : 1,\n      loading: true,\n      error: \"\",\n    };\n  }\n\n  async fetchAPI(page) {\n    try {\n      const data = await fetch(\n        `${ROOT_API}questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow${\n          page ? `&page=${page}` : \"\"\n        }`\n      );\n      const dataJSON = await data.json();\n\n      if (dataJSON) {\n        this.setState({\n          data: dataJSON,\n          loading: false,\n        });\n      }\n    } catch (error) {\n      this.setState({\n        loading: false,\n        error: error.message,\n      });\n    }\n  }\n\n  componentDidMount() {\n    const { page } = this.state;\n    this.fetchAPI(page);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.search !== this.props.location.search) {\n      const query = queryString.parse(this.props.location.search);\n      this.setState({ page: parseInt(query.page) }, () =>\n        this.fetchAPI(this.state.page)\n      );\n    }\n  }\n\n  render() {\n    const { data, loading, error, page } = this.state;\n    const { match } = this.props;\n\n    if (loading || error) {\n      return (\n        <>\n          <Helmet>\n            <Alert>{loading ? \"Loading...\" : error}</Alert>\n          </Helmet>\n        </>\n      );\n    }\n\n    return (\n      <FeedWrapper>\n        {data.items.map(item => (\n          <CardLink\n            key={item.question_id}\n            to={`/questions/${item.question_id}`}\n          >\n            <Card data={item} />\n          </CardLink>\n        ))}\n\n        <PaginationBar>\n          {page > 1 && (\n            <PaginationLink to={`${match.url}?page=${page - 1}`}>\n              Previous\n            </PaginationLink>\n          )}\n          {data.has_more && (\n            <PaginationLink to={`${match.url}?page=${page + 1}`}>\n              Next\n            </PaginationLink>\n          )}\n        </PaginationBar>\n      </FeedWrapper>\n    );\n  }\n}\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}