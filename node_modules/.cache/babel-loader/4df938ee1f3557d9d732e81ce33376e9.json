{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"/Users/paulcroitoriu/Desktop/React-projects/community-feed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  padding: 1%;\\n  background: lightblue;\\n  color: white;\\n  text-decoration: none;\\n  border-radius: 5%;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  text-decoration: none;\\n  color: inherit;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  margin: 5%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from\"react\";import styled from\"styled-components\";import{Link}from\"react-router-dom\";import queryString from\"query-string\";import Helmet from\"react-helmet\";import Card from\"../components/Card/Card\";var FeedWrapper=styled.div(_templateObject());var Alert=styled.div(_templateObject2());var CardLink=styled(Link)(_templateObject3());var PaginationBar=styled.div(_templateObject4());var PaginationLink=styled(Link)(_templateObject5());var ROOT_API=\"https://api.stackexchange.com/2.2/\";var Feed=/*#__PURE__*/function(_Component){_inherits(Feed,_Component);var _super=_createSuper(Feed);function Feed(props){var _this;_classCallCheck(this,Feed);_this=_super.call(this,props);var query=queryString.parse(props.location.search);_this.state={data:[],page:query.page?parseInt(query.page):1,loading:true,error:\"\"};return _this;}_createClass(Feed,[{key:\"fetchAPI\",value:function(){var _fetchAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var data,dataJSON;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(ROOT_API,\"questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow\").concat(page?\"&page=\".concat(page):\"\"));case 3:data=_context.sent;_context.next=6;return data.json();case 6:dataJSON=_context.sent;if(dataJSON){this.setState({data:dataJSON,loading:false});}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);this.setState({loading:false,error:_context.t0.message});case 13:case\"end\":return _context.stop();}}},_callee,this,[[0,10]]);}));function fetchAPI(_x){return _fetchAPI.apply(this,arguments);}return fetchAPI;}()},{key:\"componentDidMount\",value:function componentDidMount(){var page=this.state.page;this.fetchAPI(page);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this2=this;if(prevProps.location.search!==this.props.location.search){var query=queryString.parse(this.props.location.search);this.setState({page:parseInt(query.page)},function(){return _this2.fetchAPI(_this2.state.page);});}}},{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,loading=_this$state.loading,error=_this$state.error,page=_this$state.page;var match=this.props.match;if(loading||error){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Q&A Feed - Questions\"})}),/*#__PURE__*/_jsx(Alert,{children:loading?\"Loading...\":error})]});}return/*#__PURE__*/_jsxs(FeedWrapper,{children:[data.items.map(function(item){return/*#__PURE__*/_jsx(CardLink,{to:\"/questions/\".concat(item.question_id),children:/*#__PURE__*/_jsx(Card,{data:item})},item.question_id);}),/*#__PURE__*/_jsxs(PaginationBar,{children:[page>1&&/*#__PURE__*/_jsx(PaginationLink,{to:\"\".concat(match.url,\"?page=\").concat(page-1),children:\"Previous\"}),data.has_more&&/*#__PURE__*/_jsx(PaginationLink,{to:\"\".concat(match.url,\"?page=\").concat(page+1),children:\"Next\"})]})]});}}]);return Feed;}(Component);export default Feed;","map":{"version":3,"sources":["/Users/paulcroitoriu/Desktop/React-projects/community-feed/src/containers/Feed.js"],"names":["React","Component","styled","Link","queryString","Helmet","Card","FeedWrapper","div","Alert","CardLink","PaginationBar","PaginationLink","ROOT_API","Feed","props","query","parse","location","search","state","data","page","parseInt","loading","error","fetch","json","dataJSON","setState","message","fetchAPI","prevProps","match","items","map","item","question_id","url","has_more"],"mappings":"62EAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,yBAAjB,CAEA,GAAMC,CAAAA,WAAW,CAAGL,MAAM,CAACM,GAAV,mBAAjB,CAOA,GAAMC,CAAAA,KAAK,CAAGP,MAAM,CAACM,GAAV,oBAAX,CAIA,GAAME,CAAAA,QAAQ,CAAGR,MAAM,CAACC,IAAD,CAAT,oBAAd,CAKA,GAAMQ,CAAAA,aAAa,CAAGT,MAAM,CAACM,GAAV,oBAAnB,CAMA,GAAMI,CAAAA,cAAc,CAAGV,MAAM,CAACC,IAAD,CAAT,oBAApB,CAQA,GAAMU,CAAAA,QAAQ,CAAG,oCAAjB,C,GAEMC,CAAAA,I,4FACJ,cAAYC,KAAZ,CAAmB,sCACjB,uBAAMA,KAAN,EACA,GAAMC,CAAAA,KAAK,CAAGZ,WAAW,CAACa,KAAZ,CAAkBF,KAAK,CAACG,QAAN,CAAeC,MAAjC,CAAd,CACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,IAAI,CAAEN,KAAK,CAACM,IAAN,CAAaC,QAAQ,CAACP,KAAK,CAACM,IAAP,CAArB,CAAoC,CAF/B,CAGXE,OAAO,CAAE,IAHE,CAIXC,KAAK,CAAE,EAJI,CAAb,CAHiB,aASlB,C,2IAEcH,I,0KAEQI,CAAAA,KAAK,WACnBb,QADmB,gFAEpBS,IAAI,iBAAYA,IAAZ,EAAqB,EAFL,E,QAAlBD,I,qCAKiBA,CAAAA,IAAI,CAACM,IAAL,E,QAAjBC,Q,eAEN,GAAIA,QAAJ,CAAc,CACZ,KAAKC,QAAL,CAAc,CACZR,IAAI,CAAEO,QADM,CAEZJ,OAAO,CAAE,KAFG,CAAd,EAID,C,iFAED,KAAKK,QAAL,CAAc,CACZL,OAAO,CAAE,KADG,CAEZC,KAAK,CAAE,YAAMK,OAFD,CAAd,E,sNAOgB,IACVR,CAAAA,IADU,CACD,KAAKF,KADJ,CACVE,IADU,CAElB,KAAKS,QAAL,CAAcT,IAAd,EACD,C,8DAEkBU,S,CAAW,iBAC5B,GAAIA,SAAS,CAACd,QAAV,CAAmBC,MAAnB,GAA8B,KAAKJ,KAAL,CAAWG,QAAX,CAAoBC,MAAtD,CAA8D,CAC5D,GAAMH,CAAAA,KAAK,CAAGZ,WAAW,CAACa,KAAZ,CAAkB,KAAKF,KAAL,CAAWG,QAAX,CAAoBC,MAAtC,CAAd,CACA,KAAKU,QAAL,CAAc,CAAEP,IAAI,CAAEC,QAAQ,CAACP,KAAK,CAACM,IAAP,CAAhB,CAAd,CAA8C,iBAC5C,CAAA,MAAI,CAACS,QAAL,CAAc,MAAI,CAACX,KAAL,CAAWE,IAAzB,CAD4C,EAA9C,EAGD,CACF,C,uCAEQ,iBACgC,KAAKF,KADrC,CACCC,IADD,aACCA,IADD,CACOG,OADP,aACOA,OADP,CACgBC,KADhB,aACgBA,KADhB,CACuBH,IADvB,aACuBA,IADvB,IAECW,CAAAA,KAFD,CAEW,KAAKlB,KAFhB,CAECkB,KAFD,CAIP,GAAIT,OAAO,EAAIC,KAAf,CAAsB,CACpB,mBACE,wCACE,KAAC,MAAD,wBACE,+CADF,EADF,cAIE,KAAC,KAAD,WAAQD,OAAO,CAAG,YAAH,CAAkBC,KAAjC,EAJF,GADF,CAQD,CAED,mBACE,MAAC,WAAD,YACGJ,IAAI,CAACa,KAAL,CAAWC,GAAX,CAAe,SAAAC,IAAI,qBAClB,KAAC,QAAD,EAEE,EAAE,sBAAgBA,IAAI,CAACC,WAArB,CAFJ,uBAIE,KAAC,IAAD,EAAM,IAAI,CAAED,IAAZ,EAJF,EACOA,IAAI,CAACC,WADZ,CADkB,EAAnB,CADH,cAUE,MAAC,aAAD,YACGf,IAAI,CAAG,CAAP,eACC,KAAC,cAAD,EAAgB,EAAE,WAAKW,KAAK,CAACK,GAAX,kBAAuBhB,IAAI,CAAG,CAA9B,CAAlB,sBAFJ,CAMGD,IAAI,CAACkB,QAAL,eACC,KAAC,cAAD,EAAgB,EAAE,WAAKN,KAAK,CAACK,GAAX,kBAAuBhB,IAAI,CAAG,CAA9B,CAAlB,kBAPJ,GAVF,GADF,CAyBD,C,kBAzFgBrB,S,EA4FnB,cAAea,CAAAA,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Helmet from \"react-helmet\";\nimport Card from \"../components/Card/Card\";\n\nconst FeedWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 5%;\n`;\n\nconst Alert = styled.div`\n  text-align: center;\n`;\n\nconst CardLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n`;\n\nconst PaginationBar = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst PaginationLink = styled(Link)`\n  padding: 1%;\n  background: lightblue;\n  color: white;\n  text-decoration: none;\n  border-radius: 5%;\n`;\n\nconst ROOT_API = \"https://api.stackexchange.com/2.2/\";\n\nclass Feed extends Component {\n  constructor(props) {\n    super(props);\n    const query = queryString.parse(props.location.search);\n    this.state = {\n      data: [],\n      page: query.page ? parseInt(query.page) : 1,\n      loading: true,\n      error: \"\",\n    };\n  }\n\n  async fetchAPI(page) {\n    try {\n      const data = await fetch(\n        `${ROOT_API}questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow${\n          page ? `&page=${page}` : \"\"\n        }`\n      );\n      const dataJSON = await data.json();\n\n      if (dataJSON) {\n        this.setState({\n          data: dataJSON,\n          loading: false,\n        });\n      }\n    } catch (error) {\n      this.setState({\n        loading: false,\n        error: error.message,\n      });\n    }\n  }\n\n  componentDidMount() {\n    const { page } = this.state;\n    this.fetchAPI(page);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.search !== this.props.location.search) {\n      const query = queryString.parse(this.props.location.search);\n      this.setState({ page: parseInt(query.page) }, () =>\n        this.fetchAPI(this.state.page)\n      );\n    }\n  }\n\n  render() {\n    const { data, loading, error, page } = this.state;\n    const { match } = this.props;\n\n    if (loading || error) {\n      return (\n        <>\n          <Helmet>\n            <title>Q&A Feed - Questions</title>\n          </Helmet>\n          <Alert>{loading ? \"Loading...\" : error}</Alert>\n        </>\n      );\n    }\n\n    return (\n      <FeedWrapper>\n        {data.items.map(item => (\n          <CardLink\n            key={item.question_id}\n            to={`/questions/${item.question_id}`}\n          >\n            <Card data={item} />\n          </CardLink>\n        ))}\n\n        <PaginationBar>\n          {page > 1 && (\n            <PaginationLink to={`${match.url}?page=${page - 1}`}>\n              Previous\n            </PaginationLink>\n          )}\n          {data.has_more && (\n            <PaginationLink to={`${match.url}?page=${page + 1}`}>\n              Next\n            </PaginationLink>\n          )}\n        </PaginationBar>\n      </FeedWrapper>\n    );\n  }\n}\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}